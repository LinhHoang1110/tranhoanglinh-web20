<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Quyết đê</title>
	<script
		src="http://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous"></script>
</head>
<body>
	<nav>
		<a href="/ask">Hỏi nhanh</a>
		<a href="/">Đáp gọn</a>
	</nav>
	<h1>Question</h1>

	<button id="yes">Đúng/Có/Phải</button>


	<button id="no">Sai/Không/Trái</button>



	<button onclick="vote()">Kết quả vote</button>


	<button>Câu hỏi khác</button>

	
	<script>
		let question;
		var questionId;

		$.ajax({
			url: '/randomquestion',
			success: function(questionData) {
				$('h1').text(questionData.content);
				questionId = questionData.id;
				question = questionData;
		}
		});

		$("#yes, #no").on("click", function(event) {
			if(event.target.id === "yes"){
				question.yes++;
			} else question.no++;
			$.ajax({
				url: "/editquestion",
				type: "PUT",
				data: question,
				success: function(data) {
					window.location.href = `/result/${data.id}`;
				},
				error: function(err) {
					console.log(err);
				}
			})
		})
			
		function vote() {
			window.location.href = `/result/${ questionId }`;
		}
		// $.ajax({
		// 	url: '/randomquestion',
		// 	success: function(questionData) {
		// 		console.log(questionData)
		// 		$('h1').text(questionData.content);
		// 		$('#yes').attr("href", `/vote/${questionData.id}/yes`,$.ajax({

		// 		}));
		// 		$('#no').attr("href", `/vote/${questionData.id}/no`);
		// 		$("#vote_result").attr("href",`/result/`);
		// 		question = questionData;
		// 	}
		// });
		// $.ajax({
		// 	url:'/question_result',
		// 	type: "PUT",
		// 	data: {
		// 		question
		// 	},
		// 	success: function(data){
		// 		console.log(data)
		// 	}
		// })
	</script>
</body>
</html>